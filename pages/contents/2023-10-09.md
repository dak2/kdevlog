---
title: 'AWS VPCピア機能を使ってみた'
published_at: '2023-10-09'
updated_at: '2023-10-09'
categories: 'AWS'
---

## 概要

仕事でVPCピア機能を使ってピアリング接続してみたまとめ

## やりたかったこと

同じリージョンにある、別のAWSアカウント上のVPC間でインターネットを介さずプライベートIPを使用して、通信を行いたかった

=> AWS VPCピア機能というものがあることを知る

## VPCピア機能とは

AWS VPC間でプライベートIPを使用してトラフィックをルーティングできるようにする機能

https://docs.aws.amazon.com/ja_jp/vpc/latest/peering/what-is-vpc-peering.html

## やったこと

1. リクエスタVPCにてピアリング接続を作成(アクセプタVPCに接続確立要求)
2. アクセプタVPCでリクエスタVPCからの接続要求を承認
3. リクエストVPCにてルートテーブルにアクセプタVPCのIPアドレスを追加(アクセプタVPCでも同様)
4. 各EC2のセキュリティグループに通信許可を設定
5. リクエスタVPCのEC2からアクセプタVPCのEC2にHTTPリクエストが行えることを確認

## 所感
プライベートIPでの疎通設定がこんなに簡単にできるとは思わなかった

作業している中でVPCのResource mapがかなり便利だなということを再認識した

以前はVPCとサブネット、ルートテーブルの関連性が把握しにくかった
